{% trans_default_domain "charity" %}
{% use "DothivCharityWebsiteBundle:partials:blocks.html.twig" %}

{% set step1 = content('Block', 'basicedit.step1') %}
{% set step2 = content('Block', 'basicedit.step2') %}
{% set step3 = content('Block', 'basicedit.step3') %}
{% set step3_code = content('Block', 'basicedit.step3.code') %}
{% set step3_forwarding = content('Block', 'basicedit.step3.forwarding') %}

<div class="container">
    <div class="row">
        <div class="span12 profile-heading">
            <h2 class="pull-left">{% trans %}account.profile.domains.edit{% endtrans %}</h2>
        </div>
    </div>
    <div class="row">
        <div class="span12" data-ng-hide="banner.$resolved">
            <p class="text-center">{{ block('loading') }}</p>
        </div>
        <div class="span12" data-ng-show="banner.$resolved">
            <form novalidate name="domaineditbasic" class="simple-form" data-ng-class="{clean: !domaineditbasic.$failed, unclean: domaineditbasic.$failed}">
                <div class="row-fluid" data-ng-show="errorMessage">
                    <div class="span12 alert alert-danger" data-ng-bind="errorMessage"></div>
                </div>
                <tabset>
                    <tab active="tab1.active">
                        <tab-heading>{{ step1.title }}</tab-heading>
                        <div class="tab-content-container" data-ng-form="step1" name="step1">
                            {% if step1.text is defined %}
                                <div class="row-fluid">
                                    <div class="span12">
                                        {{ step1.text|markdown }}
                                    </div>
                                </div>
                            {% endif %}
                            <div class="row-fluid">
                                <div class="span4 horizontal-radio-group">
                                    <label>
                                        <input type="radio" name="forwardRadio" data-ng-model="domaineditbasic.$data.forwarding" value="true">
                                        {% trans %}basicedit.forwarding.enable{% endtrans %}
                                    </label> <label>
                                        <input type="radio" name="forwardRadio" data-ng-model="domaineditbasic.$data.forwarding" value="false">
                                        {% trans %}basicedit.forwarding.disable{% endtrans %}
                                    </label>
                                </div>
                                <div class="span4">
                                    <div data-ng-show="domaineditbasic.$data.forwarding == 'true'">
                                        <label for="basicEditFormTargetName">
                                            {% trans %}basicedit.forwarding.targeturl{% endtrans %}
                                        </label>
                                        <input type="url" name="targetName" id="basicEditFormTargetName" data-ng-model="banner.redirect_url" data-ng-required="domaineditbasic.$data.forwarding == 'true'">
                                    </div>
                                </div>
                                <div class="span4">
                                    <label>
                                        {% trans %}basicedit.language{% endtrans %}
                                    </label>

                                    <div class="horizontal-radio-group">
                                        {% for l in ['en', 'de', 'es', 'fr'] %}
                                            <label>
                                                <input type="radio" name="languages" data-ng-model="banner.language" value="{{ l }}" required>
                                                {% set code = 'domain.language.' ~ l %}
                                                {{ code|trans }}
                                            </label>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="tab-bottom-buttons span12">
                                    <button class="pull-right next" data-ng-click="nextStep(tab2, step1)" data-ng-disabled="!domaineditbasic.$valid">
                                        <i class="icon-tick-right icon-white pull-right"></i>{% trans %}
                                        generic.button.next{% endtrans %}&nbsp;</button>
                                </div>
                            </div>
                        </div>
                    </tab>
                    <tab active="tab2.active" disabled="!step1.$valid">
                        <tab-heading>{{ step2.title }}</tab-heading>
                        <div class="tab-content-container" data-ng-form="step2">
                            {% if step2.text is defined %}
                                <div class="row-fluid">
                                    <div class="span12">
                                        {{ step2.text|markdown }}
                                    </div>
                                </div>
                            {% endif %}
                            <div class="row-fluid">
                                <div class="offset1 span3 position-radio-container">
                                    <label class="position-label center">
                                        <input type="radio" name="positionRadio" data-ng-model="banner.position_first" value="center" id="positionRadioCenter">
                                        {% trans %}domain.position.center{% endtrans %}
                                    </label>
                                </div>
                                <div class="span3 position-radio-container">
                                    <label class="position-label top">
                                        <input type="radio" name="positionRadio" data-ng-model="banner.position_first" value="top" id="positionRadioTop">
                                        {% trans %}domain.position.top{% endtrans %}
                                    </label>
                                </div>
                                <div class="span3 position-radio-container">
                                    <label class="position-label right">
                                        <input type="radio" name="positionRadio" data-ng-model="banner.position_first" value="right" id="positionRadioRight">
                                        {% trans %}domain.position.right{% endtrans %}
                                    </label>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="offset1 span11">
                                    <label>
                                        <input type="checkbox" name="secondvisitBox" data-ng-model="domaineditbasic.$data.secondvisit" value="true">
                                        {% trans %}basicedit.secondvisit.option{% endtrans %}
                                    </label>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="offset1 span3 position-radio-container" data-ng-show="domaineditbasic.$data.secondvisit == true">
                                    <label class="position-label top">
                                        <input type="radio" name="secondpositionRadio" data-ng-model="banner.position" value="top" id="altPositionRadioTop">
                                        {% trans %}domain.position.top{% endtrans %}
                                    </label>
                                </div>
                                <div class="span3 position-radio-container" data-ng-show="domaineditbasic.$data.secondvisit == true">
                                    <label class="position-label right">
                                        <input type="radio" name="secondpositionRadio" data-ng-model="banner.position" value="right" id="altPositionRadioRight">
                                        {% trans %}domain.position.right{% endtrans %}
                                    </label>
                                </div>
                            </div>
                            <div class="tab-bottom-buttons">
                                <button data-ng-click="tab1.active = true"><i class="icon-tick-left"></i>&nbsp;
                                    {% trans %}generic.button.back{% endtrans %}
                                </button>
                                <button class="pull-right next" data-ng-click="submit(tab3)">
                                    <i class="icon-tick-right icon-white pull-right"></i>{% trans %}
                                    generic.button.next{% endtrans %}&nbsp;</button>
                            </div>
                        </div>
                    </tab>
                    <tab active="tab3.active" disabled="true">
                        <tab-heading>{{ step3.title }}</tab-heading>
                        <div class="tab-content-container" style="font-style: normal;">
                            <div data-ng-show="!banner.$resolved">
                                <p class="text-center">{{ block('loading') }}</p>
                            </div>
                            <div data-ng-show="banner.$resolved">
                                <div class="row-fluid">
                                    <h3>
                                        <span class="span1 text-center">
                                            <i class="icon-greentick"></i>
                                        </span>
                                        <span class="span11">
                                            {{ step3.text }}
                                        </span>
                                    </h3>
                                </div>

                                <div class="row-fluid">
                                    <div class="span12 well" data-ng-show="domaineditbasic.$data.forwarding == 'false'">
                                        <p class="text-center">
                                            {% image "@DothivCharityWebsiteBundle/Resources/public/images/clickcounterjs.png" %}
                                            <img src="{{ asset_url }}" alt=""/>
                                            {% endimage %}
                                        </p>

                                        <h3>{{ step3_code.title }}</h3>

                                        {{ step3_code.text|markdown }}
                                    </div>
                                    <div class="span12 well" data-ng-show="domaineditbasic.$data.forwarding == 'true'">
                                        <p class="text-center">
                                            {% image "@DothivCharityWebsiteBundle/Resources/public/images/clickcounterjs.png" %}
                                            <img src="{{ asset_url }}" alt=""/>
                                            {% endimage %}
                                        </p>

                                        <h3>{{ step3_forwarding.title }}</h3>

                                        {{ step3_forwarding.text|markdown }}
                                    </div>
                                </div>
                            </div>

                            <div class="tab-bottom-buttons">
                                <button data-ng-click="tab2.active = true"><i class="icon-tick-left"></i>&nbsp;
                                    {% trans %}generic.button.back{% endtrans %}
                                </button>
                            </div>
                        </div>
                    </tab>
                </tabset>
            </form>
        </div>
    </div>
</div>
