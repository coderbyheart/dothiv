{% import "DothivAdminBundle:Page:app/form.html.twig" as form %}
<article class="crud" data-ng-init="itemUrl = '/admin/api/domain/' + stateParams.identifier;">
    <header>
        <h1>
            <a data-ng-href="http://www.%%stateParams.identifier%%/">%%stateParams.identifier%%</a>
        </h1>
    </header>
    <div id="alert-msg" role="alert" data-ng-show="errorMessage">
        <button type="button" class="close" data-ng-click="errorMessage=''">
            <span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <p data-ng-bind="errorMessage"></p>
    </div>
    <section data-ng-show="!loaded">
        <i class="loading"></i> Loading â€¦
    </section>
</article>
<article class="crud" data-ng-show="loaded">
    <section class="item">
        <h2>Owner</h2>
        <dl>
            <dt>Name</dt>
            <dd data-ng-bind="item.ownerName"></dd>
            <dt>Email</dt>
            <dd><a data-ng-href="mailto:%%item.ownerEmail%%" data-ng-bind="item.ownerEmail"></a>
            <dt data-ng-show="item.loginLink">Login-Link</dt>
            <dd data-ng-show="item.loginLink"><a data-ng-href="%%item.loginLink%%" data-ng-bind="item.loginLink"></a>
            </dd>
        </dl>
    </section>
    <section class="item">
        <h2>Info</h2>
        <dl>
            <dt>Created</dt>
            <dd><abbr class="time" title="%%item.created%%" am-time-ago="item.created"></abbr></dd>
            <dt>Click-Counter</dt>
            <dd>
                <i class="yes" data-ng-show="item.clickCounterConfigured"></i>
                <i class="no" data-ng-show="!item.clickCounterConfigured"></i>
            </dd>
            <dt>Clicks</dt>
            <dd data-ng-bind="item.clickCount"></dd>
            <dt>Token sent</dt>
            <dd>
                <span data-ng-show="item.registrar.notification">
                    <i class="yes" data-ng-show="item.tokenSent"></i>
                    <i class="no" data-ng-show="!item.tokenSent"></i>
                </span>
                <span data-ng-show="!item.registrar.notification">
                    &mdash;
                </span>
            </dd>
            <dt data-ng-show="item.token">Token</dt>
            <dd data-ng-show="item.token"><code data-ng-bind="item.token"></code></dd>
            <dt data-ng-show="item.transfer"><i class="transfer"></i> Transfer</dt>
            <dd data-ng-show="item.transfer">active</dd>
            <dt data-ng-show="item.nonprofit"><i class="nonprofit"></i> Non-Profit domain</dt>
            <dd data-ng-show="item.nonprofit">yes</dd>
        </dl>
    </section>
    <section class="item">
        <h2>Registrar</h2>
        <dl>
            <dt>ID</dt>
            <dd data-ng-bind="item.registrar.extId"></dd>
            <dt>Name</dt>
            <dd data-ng-bind="item.registrar.name"></dd>
            <dt>Notification</dt>
            <dd data-ng-bind="item.registrar.notificationType"></dd>
        </dl>
    </section>
    <section class="item" data-ng-controller="AdminEditController" data-ng-init="itemUrl = '/admin/api/hivdomainstatus/' + stateParams.identifier;" data-ng-show="loaded">
        <h2>
            .hiv Domain Check
            <small>
                <i class="yes" data-ng-show="item.valid"></i> <i class="no" data-ng-show="!item.valid"></i>
            </small>
        </h2>
        <dl>
            <dt>DNS</dt>
            <dd>
                <i class="yes" data-ng-show="item.dnsOk"></i> <i class="no" data-ng-show="!item.dnsOk"></i>
            </dd>
            <dt>URL</dt>
            <dd>
                <a data-ng-href="%%item.url%%" data-ng-bind="item.url"></a>
            </dd>
            <dt>Status</dt>
            <dd><code data-ng-bind="item.statusCode"></code></dd>
            <dt>Script</dt>
            <dd>
                <i class="yes" data-ng-show="item.scriptPresent"></i>
                <i class="no" data-ng-show="!item.scriptPresent"></i>
            </dd>
            <dt data-ng-show="item.iframePresent">Iframe</dt>
            <dd data-ng-show="item.iframePresent">
                <i class="yes" data-ng-show="item.iframeTargetOk"></i>
                <i class="no" data-ng-show="!item.iframeTargetOk"></i>
                <br><a data-ng-href="%%item.iframeTarget%%" data-ng-bind="item.iframeTarget"></a>
            </dd>
            <dt>Checked</dt>
            <dd><abbr class="time" title="%%item.created%%" am-time-ago="item.created"></abbr></dd>
        </dl>
    </section>
    <div data-ng-controller="AdminEditController" data-ng-init="itemUrl = '/admin/api/whois/' + stateParams.identifier;" data-ng-show="loaded">
        <section class="item">
            <h2>
                WHOIS Registrant
            </h2>
            <dl>
                <dt>Name</dt>
                <dd data-ng-bind="item.whois.Registrant.Name"></dd>
                <dt>Email</dt>
                <dd><a href="mailto:%%item.whois.Registrant.Email" data-ng-bind="item.whois.Registrant.Email"></a></dd>
                <dt data-ng-show="item.whois.Registrant.Organization">Organization</dt>
                <dd data-ng-show="item.whois.Registrant.Organization" data-ng-bind="item.whois.Registrant.Organization"></dd>
                <dt>Street</dt>
                <dd data-ng-bind="item.whois.Registrant.Street"></dd>
                <dt>Postal Code</dt>
                <dd data-ng-bind="item.whois.Registrant.Postal_Code"></dd>
                <dt>City</dt>
                <dd data-ng-bind="item.whois.Registrant.City"></dd>
                <dt>Country</dt>
                <dd data-ng-bind="item.whois.Registrant.Country"></dd>
                <dt>Phone</dt>
                <dd data-ng-bind="item.whois.Registrant.Phone"></dd>
            </dl>
        </section>
        <section class="item">
            <h2>
                WHOIS Info
            </h2>
            <dl>
                <dt>Creation Date</dt>
                <dd><abbr class="time" title="%%item.whois.Creation_Date%%" am-time-ago="item.whois.Creation_Date"></abbr></dd>
                <dt data-ng-show="item.whois.Updated_Date">Updated Date</dt>
                <dd data-ng-show="item.whois.Updated_Date"><abbr class="time" title="%%item.whois.Updated_Date%%" am-time-ago="item.whois.Updated_Date"></abbr></dd>
                <dt>Expiry Date</dt>
                <dd><abbr class="time" title="%%item.whois.Registry_Expiry_Date%%" am-time-ago="item.whois.Registry_Expiry_Date"></abbr></dd>
                <dt data-ng-show="item.whois.Name_Server">Name Servers</dt>
                <dd data-ng-show="item.whois.Name_Server">
                    <ul>
                        <li data-ng-repeat="ns in item.whois.Name_Server"><code data-ng-bind="ns"></code></li>
                    </ul>
                </dd>
            </dl>
        </section>
    </div>
</article>
<article data-ng-show="loaded">
    <form class="crud" role="form" name="domainForm" novalidate>
        <fieldset>
            <legend>Action</legend>
            {{ form.toggle("item", "transfer", "Toggle transfer") }}
            {{ form.toggle("item", "nonprofit", "Toggle non-profit") }}
        </fieldset>
    </form>
</article>
